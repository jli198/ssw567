<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><!--NewPage--><html><head><!-- Generated by javadoc on Thu Aug 30 09:49:05 EDT 2001 --><title>  Class atm.transaction.Transaction</title></head><body><a name="_top_"></a><pre><a href="../../packages.html">All Packages</a>  <a href="../../tree.html">Class Hierarchy</a>  <a href="../../atm.transaction.html">This Package</a>  <a href="../../atm.transaction.html">Previous</a>  <a href="../../atm.transaction.html">Next</a>  <a href="../../AllNames.html">Index</a></pre><hr><h1>  Class atm.transaction.Transaction</h1><pre>java.lang.Object   |   +----atm.transaction.Transaction</pre><hr><dl>  <dt> public abstract class <b>Transaction</b>  <dt> extends Object</dl>Abstract base class for classes representing the various kinds of
  transaction the ATM can perform<p><hr><a name="index"></a><h2>  <img src="../../images/variable-index.gif" width=207 height=38 alt="Variable Index"></h2><dl>  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#ASKING_DO_ANOTHER_STATE"><b>ASKING_DO_ANOTHER_STATE</b></a>  <dd> Asking if customer wants to do another transaction
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#atm"><b>atm</b></a>  <dd> ATM to use for communication with the customer
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#balances"><b>balances</b></a>  <dd> Used to return account balances from the bank
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#card"><b>card</b></a>  <dd> Customer card for the session this transaction is part of
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#COMPLETING_TRANSACTION_STATE"><b>COMPLETING_TRANSACTION_STATE</b></a>  <dd> Completing transaction
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#GETTING_SPECIFICS_STATE"><b>GETTING_SPECIFICS_STATE</b></a>  <dd> Getting specifics of the transaction from customer
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#INVALID_PIN_STATE"><b>INVALID_PIN_STATE</b></a>  <dd> Performing invalid PIN extension
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#message"><b>message</b></a>  <dd> Message to bank describing this transaction
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#nextSerialNumber"><b>nextSerialNumber</b></a>  <dd> Next serial number - used to assign a unique serial number to
  each transaction
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#pin"><b>pin</b></a>  <dd> PIN entered or re-entered by customer
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#PRINTING_RECEIPT_STATE"><b>PRINTING_RECEIPT_STATE</b></a>  <dd> Printing receipt
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#SENDING_TO_BANK_STATE"><b>SENDING_TO_BANK_STATE</b></a>  <dd> Sending transaction to bank
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#serialNumber"><b>serialNumber</b></a>  <dd> Serial number of this transaction
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#session"><b>session</b></a>  <dd> Session in which this transaction is being performed
  <dt> <img src="../../images/magenta-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#state"><b>state</b></a>  <dd> The current state of the transaction
  <dt> <img src="../../images/blue-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#TRANSACTION_TYPES_MENU"><b>TRANSACTION_TYPES_MENU</b></a>  <dd> List of available transaction types to display as a menu
</dl><h2>  <img src="../../images/constructor-index.gif" width=275 height=38 alt="Constructor Index"></h2><dl>  <dt> <img src="../../images/yellow-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#Transaction(atm.ATM, atm.Session, banking.Card, int)"><b>Transaction</b></a>(ATM, Session, Card, int)  <dd> Constructor

  </dl><h2>  <img src="../../images/method-index.gif" width=207 height=38 alt="Method Index"></h2><dl>  <dt> <img src="../../images/red-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#completeTransaction()"><b>completeTransaction</b></a>()  <dd> Complete an approved transaction  - each subclass must implement
  this appropriately.  <dt> <img src="../../images/red-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#getSerialNumber()"><b>getSerialNumber</b></a>()  <dd> Get serial number of this transaction

    <dt> <img src="../../images/red-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#getSpecificsFromCustomer()"><b>getSpecificsFromCustomer</b></a>()  <dd> Get specifics for the transaction from the customer - each
  subclass must implement this appropriately.  <dt> <img src="../../images/green-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#makeTransaction(atm.ATM, atm.Session, banking.Card, int)"><b>makeTransaction</b></a>(ATM, Session, Card, int)  <dd> Create a transaction of an appropriate type by asking the customer
  what type of transaction is desired and then returning a newly-created
  member of the appropriate subclass

    <dt> <img src="../../images/red-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#performInvalidPINExtension()"><b>performInvalidPINExtension</b></a>()  <dd> Perform the Invalid PIN Extension - reset session pin to new value if successful

    <dt> <img src="../../images/red-ball-small.gif" width=6 height=6 alt=" o ">	<a href="#performTransaction()"><b>performTransaction</b></a>()  <dd> Peform a transaction.</dl><a name="variables"></a><h2>  <img src="../../images/variables.gif" width=153 height=38 alt="Variables"></h2><a name="atm"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>atm</b><pre> protected <a href="../../atm/ATM.html#_top_">ATM</a> atm</pre><dl>  <dd> ATM to use for communication with the customer<p></dl><a name="session"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>session</b><pre> protected <a href="../../atm/Session.html#_top_">Session</a> session</pre><dl>  <dd> Session in which this transaction is being performed<p></dl><a name="card"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>card</b><pre> protected <a href="../../banking/Card.html#_top_">Card</a> card</pre><dl>  <dd> Customer card for the session this transaction is part of<p></dl><a name="pin"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>pin</b><pre> protected int pin</pre><dl>  <dd> PIN entered or re-entered by customer<p></dl><a name="serialNumber"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>serialNumber</b><pre> protected int serialNumber</pre><dl>  <dd> Serial number of this transaction<p></dl><a name="message"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>message</b><pre> protected <a href="../../banking/Message.html#_top_">Message</a> message</pre><dl>  <dd> Message to bank describing this transaction<p></dl><a name="balances"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>balances</b><pre> protected <a href="../../banking/Balances.html#_top_">Balances</a> balances</pre><dl>  <dd> Used to return account balances from the bank<p></dl><a name="TRANSACTION_TYPES_MENU"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>TRANSACTION_TYPES_MENU</b><pre> private static final String TRANSACTION_TYPES_MENU[]</pre><dl>  <dd> List of available transaction types to display as a menu<p></dl><a name="nextSerialNumber"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>nextSerialNumber</b><pre> private static int nextSerialNumber</pre><dl>  <dd> Next serial number - used to assign a unique serial number to
  each transaction<p></dl><a name="state"><img src="../../images/magenta-ball.gif" width=12 height=12 alt=" o "></a><b>state</b><pre> private int state</pre><dl>  <dd> The current state of the transaction<p></dl><a name="GETTING_SPECIFICS_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>GETTING_SPECIFICS_STATE</b><pre> private static final int GETTING_SPECIFICS_STATE</pre><dl>  <dd> Getting specifics of the transaction from customer<p></dl><a name="SENDING_TO_BANK_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>SENDING_TO_BANK_STATE</b><pre> private static final int SENDING_TO_BANK_STATE</pre><dl>  <dd> Sending transaction to bank<p></dl><a name="INVALID_PIN_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>INVALID_PIN_STATE</b><pre> private static final int INVALID_PIN_STATE</pre><dl>  <dd> Performing invalid PIN extension<p></dl><a name="COMPLETING_TRANSACTION_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>COMPLETING_TRANSACTION_STATE</b><pre> private static final int COMPLETING_TRANSACTION_STATE</pre><dl>  <dd> Completing transaction<p></dl><a name="PRINTING_RECEIPT_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>PRINTING_RECEIPT_STATE</b><pre> private static final int PRINTING_RECEIPT_STATE</pre><dl>  <dd> Printing receipt<p></dl><a name="ASKING_DO_ANOTHER_STATE"><img src="../../images/blue-ball.gif" width=12 height=12 alt=" o "></a><b>ASKING_DO_ANOTHER_STATE</b><pre> private static final int ASKING_DO_ANOTHER_STATE</pre><dl>  <dd> Asking if customer wants to do another transaction<p></dl><a name="constructors"></a><h2>  <img src="../../images/constructors.gif" width=231 height=38 alt="Constructors"></h2><a name="Transaction"></a><a name="Transaction(atm.ATM, atm.Session, banking.Card, int)"><img src="../../images/yellow-ball.gif" width=12 height=12 alt=" o "></a><b>Transaction</b><pre> protected Transaction(<a href="../../atm/ATM.html#_top_">ATM</a> atm,                       <a href="../../atm/Session.html#_top_">Session</a> session,                       <a href="../../banking/Card.html#_top_">Card</a> card,                       int pin)</pre><dl>  <dd> Constructor<p>  <dd><dl>    <dt> <b>Parameters:</b>    <dd> atm - the ATM used to communicate with customer    <dd> session - the session in which this transaction is being performed    <dd> card - the customer's card    <dd> pin - the PIN entered by the customer  </dl></dd></dl><a name="methods"></a><h2>  <img src="../../images/methods.gif" width=151 height=38 alt="Methods"></h2><a name="makeTransaction(atm.ATM, atm.Session, banking.Card, int)"><img src="../../images/green-ball.gif" width=12 height=12 alt=" o "></a><a name="makeTransaction"><b>makeTransaction</b></a><pre> public static <a href="#_top_">Transaction</a> makeTransaction(<a href="../../atm/ATM.html#_top_">ATM</a> atm,                                           <a href="../../atm/Session.html#_top_">Session</a> session,                                           <a href="../../banking/Card.html#_top_">Card</a> card,                                           int pin) throws <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a></pre><dl>  <dd> Create a transaction of an appropriate type by asking the customer
  what type of transaction is desired and then returning a newly-created
  member of the appropriate subclass<p>  <dd><dl>    <dt> <b>Parameters:</b>    <dd> atm - the ATM used to communicate with customer    <dd> session - the session in which this transaction is being performed    <dd> card - the customer's card    <dd> pin - the PIN entered by the customer    <dt> <b>Returns:</b>    <dd> a newly created Transaction object of the appropriate type    <dt> <b>Throws:</b> <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a>    <dd> if the customer presses cancel instead
         of choosing a transaction type  </dl></dd></dl><a name="performTransaction()"><img src="../../images/red-ball.gif" width=12 height=12 alt=" o "></a><a name="performTransaction"><b>performTransaction</b></a><pre> public boolean performTransaction() throws <a href="../../atm/transaction/Transaction/CardRetained.html#_top_">Transaction. CardRetained</a></pre><dl>  <dd> Peform a transaction.  This method depends on the three abstract methods
  that follow to perform the operations unique to each type of transaction
  in the appropriate way.<p>  <dd><dl>    <dt> <b>Returns:</b>    <dd> true if customer indicates a desire to do another transaction;
          false if customer does not desire to do another transaction    <dt> <b>Throws:</b> <a href="../../atm/transaction/Transaction/CardRetained.html#_top_">Transaction. CardRetained</a>    <dd> if card was retained due to too many invalid PIN's  </dl></dd></dl><a name="performInvalidPINExtension()"><img src="../../images/red-ball.gif" width=12 height=12 alt=" o "></a><a name="performInvalidPINExtension"><b>performInvalidPINExtension</b></a><pre> public <a href="../../banking/Status.html#_top_">Status</a> performInvalidPINExtension() throws <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a>, <a href="../../atm/transaction/Transaction/CardRetained.html#_top_">Transaction. CardRetained</a></pre><dl>  <dd> Perform the Invalid PIN Extension - reset session pin to new value if successful<p>  <dd><dl>    <dt> <b>Returns:</b>    <dd> status code returned by bank from most recent re-submission
          of transaction    <dt> <b>Throws:</b> <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a>    <dd> if customer presses the CANCEL key
             instead of re-entering PIN    <dt> <b>Throws:</b> <a href="../../atm/transaction/Transaction/CardRetained.html#_top_">Transaction. CardRetained</a>    <dd> if card was retained due to too many invalid PIN's  </dl></dd></dl><a name="getSerialNumber()"><img src="../../images/red-ball.gif" width=12 height=12 alt=" o "></a><a name="getSerialNumber"><b>getSerialNumber</b></a><pre> public int getSerialNumber()</pre><dl>  <dd> Get serial number of this transaction<p>  <dd><dl>    <dt> <b>Returns:</b>    <dd> serial number  </dl></dd></dl><a name="getSpecificsFromCustomer()"><img src="../../images/red-ball.gif" width=12 height=12 alt=" o "></a><a name="getSpecificsFromCustomer"><b>getSpecificsFromCustomer</b></a><pre> protected abstract <a href="../../banking/Message.html#_top_">Message</a> getSpecificsFromCustomer() throws <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a></pre><dl>  <dd> Get specifics for the transaction from the customer - each
  subclass must implement this appropriately.<p>  <dd><dl>    <dt> <b>Returns:</b>    <dd> message to bank for initiating this transaction    <dt> <b>Throws:</b> <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a>    <dd> if customer cancelled this transaction  </dl></dd></dl><a name="completeTransaction()"><img src="../../images/red-ball.gif" width=12 height=12 alt=" o "></a><a name="completeTransaction"><b>completeTransaction</b></a><pre> protected abstract <a href="../../banking/Receipt.html#_top_">Receipt</a> completeTransaction() throws <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a></pre><dl>  <dd> Complete an approved transaction  - each subclass must implement
  this appropriately.<p>  <dd><dl>    <dt> <b>Returns:</b>    <dd> receipt to be printed for this transaction    <dt> <b>Throws:</b> <a href="../../atm/physical/CustomerConsole/Cancelled.html#_top_">CustomerConsole. Cancelled</a>    <dd> if customer cancelled this transaction  </dl></dd></dl><hr><pre><a href="../../packages.html">All Packages</a>  <a href="../../tree.html">Class Hierarchy</a>  <a href="../../atm.transaction.html">This Package</a>  <a href="../../atm.transaction.html">Previous</a>  <a href="../../atm.transaction.html">Next</a>  <a href="../../AllNames.html">Index</a></pre></body></html>